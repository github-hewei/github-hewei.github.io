"use strict";(self.webpackChunkhwdoc=self.webpackChunkhwdoc||[]).push([[8576],{9560:(r,e,s)=>{s.r(e),s.d(e,{assets:()=>c,contentTitle:()=>o,default:()=>a,frontMatter:()=>i,metadata:()=>u,toc:()=>l});var n=s(4848),t=s(8453);const i={},o="Supervisor\u8fdb\u7a0b\u7ba1\u7406",u={id:"\u540e\u7aef\u5f00\u53d1/Supervisor\u8fdb\u7a0b\u7ba1\u7406",title:"Supervisor\u8fdb\u7a0b\u7ba1\u7406",description:"\u7b80\u4ecb",source:"@site/docs/\u540e\u7aef\u5f00\u53d1/Supervisor\u8fdb\u7a0b\u7ba1\u7406.md",sourceDirName:"\u540e\u7aef\u5f00\u53d1",slug:"/\u540e\u7aef\u5f00\u53d1/Supervisor\u8fdb\u7a0b\u7ba1\u7406",permalink:"/docs/\u540e\u7aef\u5f00\u53d1/Supervisor\u8fdb\u7a0b\u7ba1\u7406",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/\u540e\u7aef\u5f00\u53d1/Supervisor\u8fdb\u7a0b\u7ba1\u7406.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Nginx\u8d1f\u8f7d\u5747\u8861",permalink:"/docs/\u540e\u7aef\u5f00\u53d1/Nginx\u8d1f\u8f7d\u5747\u8861"},next:{title:"Windows Terminal\u6559\u7a0b",permalink:"/docs/\u540e\u7aef\u5f00\u53d1/WindowsTerminal\u5feb\u6377\u952e"}},c={},l=[{value:"\u7b80\u4ecb",id:"\u7b80\u4ecb",level:2},{value:"\u5b89\u88c5\u6b65\u9aa4",id:"\u5b89\u88c5\u6b65\u9aa4",level:2},{value:"\u8fdb\u7a0b\u914d\u7f6e\u6587\u4ef6",id:"\u8fdb\u7a0b\u914d\u7f6e\u6587\u4ef6",level:2},{value:"\u63a7\u5236\u8fdb\u7a0b\u72b6\u6001",id:"\u63a7\u5236\u8fdb\u7a0b\u72b6\u6001",level:2}];function d(r){const e={a:"a",code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",...(0,t.R)(),...r.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.h1,{id:"supervisor\u8fdb\u7a0b\u7ba1\u7406",children:"Supervisor\u8fdb\u7a0b\u7ba1\u7406"}),"\n",(0,n.jsx)(e.h2,{id:"\u7b80\u4ecb",children:"\u7b80\u4ecb"}),"\n",(0,n.jsxs)(e.p,{children:["Supervisor (",(0,n.jsx)(e.a,{href:"http://supervisord.org",children:"http://supervisord.org"}),") \u662f\u4e00\u4e2a\u7528 Python \u5199\u7684\u8fdb\u7a0b\u7ba1\u7406\u5de5\u5177\uff0c\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u7528\u6765\u542f\u52a8\u3001\u91cd\u542f\u3001\u5173\u95ed\u8fdb\u7a0b\uff08\u4e0d\u4ec5\u4ec5\u662f Python \u8fdb\u7a0b\uff09\u3002\u9664\u4e86\u5bf9\u5355\u4e2a\u8fdb\u7a0b\u7684\u63a7\u5236\uff0c\u8fd8\u53ef\u4ee5\u540c\u65f6\u542f\u52a8\u3001\u5173\u95ed\u591a\u4e2a\u8fdb\u7a0b\uff0c\u6bd4\u5982\u5f88\u4e0d\u5e78\u7684\u670d\u52a1\u5668\u51fa\u95ee\u9898\u5bfc\u81f4\u6240\u6709\u5e94\u7528\u7a0b\u5e8f\u90fd\u88ab\u6740\u6b7b\uff0c\u6b64\u65f6\u53ef\u4ee5\u7528 supervisor \u540c\u65f6\u542f\u52a8\u6240\u6709\u5e94\u7528\u7a0b\u5e8f\u800c\u4e0d\u662f\u4e00\u4e2a\u4e00\u4e2a\u5730\u6572\u547d\u4ee4\u542f\u52a8\u3002"]}),"\n",(0,n.jsx)(e.h2,{id:"\u5b89\u88c5\u6b65\u9aa4",children:"\u5b89\u88c5\u6b65\u9aa4"}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-sh",children:"# \u5b89\u88c5\u547d\u4ee4\r\nyum -y install supervisor\r\n\r\n# \u670d\u52a1\u7aef\u4fe1\u606f\r\nwhereis supervisord\r\n# supervisord: /usr/bin/supervisord /etc/supervisord.conf /etc/supervisord.d\r\n\r\n# \u63a7\u5236\u7aef\u4fe1\u606f\r\nwhereis supervisorctl\r\n# supervisorctl: /usr/bin/supervisorctl\r\n\r\n# \u542f\u52a8\u670d\u52a1\r\nsystemctl start supervisord\r\n\r\n# \u67e5\u770b\u8fdb\u7a0b\r\nps -ef| grep supervisord\r\n\r\n# \u8bbe\u4e3a\u5f00\u673a\u81ea\u542f\u52a8\r\nsystemctl enable supervisord\n"})}),"\n",(0,n.jsx)(e.h2,{id:"\u8fdb\u7a0b\u914d\u7f6e\u6587\u4ef6",children:"\u8fdb\u7a0b\u914d\u7f6e\u6587\u4ef6"}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-ini",children:"[program:sv001]\r\n; \u901a\u8fc7 supervisor \u7ef4\u62a4\uff0cthink-queue \u7684\u76d1\u542c\u7a0b\u5e8f\u8fdb\u7a0b\r\ndirectory=/www/wwwroot/www2.website.com\r\ncommand=/www/server/php/72/bin/php think queue:listen --queue shopro\r\nautostart=true\r\nstartsecs=5\r\nautorestart=true\r\nstartretries=3\r\nuser=www\r\nredirect_stderr=true\r\nstdout_logfile_maxbytes=20MB\r\nstdout_logfile_backups=20\r\n; \u65e5\u5fd7\u8def\u5f84\u4e0d\u5b58\u5728\u9700\u8981\u624b\u52a8\u521b\u5efa\r\nstdout_logfile=/var/log/sv001_stdout.log\n"})}),"\n",(0,n.jsx)(e.h2,{id:"\u63a7\u5236\u8fdb\u7a0b\u72b6\u6001",children:"\u63a7\u5236\u8fdb\u7a0b\u72b6\u6001"}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-sh",children:"# \u542f\u52a8\u8fdb\u7a0b\r\nsupervisorctl start lmkweixin\r\n\r\n# \u505c\u6b62\u8fdb\u7a0b\r\nsupervisorctl stop lmkweixin\r\n\r\n# \u67e5\u770b\u8fdb\u7a0b\u72b6\u6001\r\nsupervisorctl status\r\n\r\n# \u91cd\u542f\u8fdb\u7a0b\r\nsupervisorctl restart lmkweixin\n"})})]})}function a(r={}){const{wrapper:e}={...(0,t.R)(),...r.components};return e?(0,n.jsx)(e,{...r,children:(0,n.jsx)(d,{...r})}):d(r)}},8453:(r,e,s)=>{s.d(e,{R:()=>o,x:()=>u});var n=s(6540);const t={},i=n.createContext(t);function o(r){const e=n.useContext(i);return n.useMemo((function(){return"function"==typeof r?r(e):{...e,...r}}),[e,r])}function u(r){let e;return e=r.disableParentContext?"function"==typeof r.components?r.components(t):r.components||t:o(r.components),n.createElement(i.Provider,{value:e},r.children)}}}]);
"use strict";(self.webpackChunkhwdoc=self.webpackChunkhwdoc||[]).push([[6979],{5683:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>s,metadata:()=>d,toc:()=>l});var t=r(4848),o=r(8453);const s={},a="MongoDB\u6742\u9879\u8bb0\u5f55",d={id:"MongoDB/MongoDB\u6742\u9879\u8bb0\u5f55",title:"MongoDB\u6742\u9879\u8bb0\u5f55",description:"\u5e38\u7528\u57fa\u672c\u547d\u4ee4",source:"@site/docs/MongoDB/MongoDB\u6742\u9879\u8bb0\u5f55.md",sourceDirName:"MongoDB",slug:"/MongoDB/MongoDB\u6742\u9879\u8bb0\u5f55",permalink:"/docs/MongoDB/MongoDB\u6742\u9879\u8bb0\u5f55",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/MongoDB/MongoDB\u6742\u9879\u8bb0\u5f55.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Linux\u5e38\u7528\u547d\u4ee4\u8bb0\u5f55",permalink:"/docs/Linux/\u5e38\u7528\u547d\u4ee4\u8bb0\u5f55"},next:{title:"MySQL\u4e3b\u4ece\u540c\u6b65",permalink:"/docs/MySQL/MySQL\u4e3b\u4ece\u540c\u6b65"}},c={},l=[{value:"\u5e38\u7528\u57fa\u672c\u547d\u4ee4",id:"\u5e38\u7528\u57fa\u672c\u547d\u4ee4",level:2},{value:"\u521b\u5efa\u7528\u6237",id:"\u521b\u5efa\u7528\u6237",level:2},{value:"\u805a\u5408\u67e5\u8be2",id:"\u805a\u5408\u67e5\u8be2",level:2}];function i(n){const e={code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.h1,{id:"mongodb\u6742\u9879\u8bb0\u5f55",children:"MongoDB\u6742\u9879\u8bb0\u5f55"}),"\n",(0,t.jsx)(e.h2,{id:"\u5e38\u7528\u57fa\u672c\u547d\u4ee4",children:"\u5e38\u7528\u57fa\u672c\u547d\u4ee4"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-sh",children:'# \u5e2e\u52a9\r\nhelp\r\n# \u5f53\u524d\u6570\u636e\u5e93\r\ndb\r\n# \u67e5\u770b\u51fd\u6570\u7684\u4fe1\u606f\r\ndb.getName\r\n# \u8c03\u7528\u51fd\u6570\r\ndb.getName()\r\n# \u67e5\u770b\u51fd\u6570\u7684\u6587\u6863\r\ndb.getName.help()\r\n# \u5207\u6362\u6570\u636e\u5e93\r\nuse [dbname]\r\n# \u7ed9\u5f53\u524d\u6570\u636e\u5e93\u6dfb\u52a0\u7528\u6237\r\ndb.addUser()\r\n# \u5199\u5165\u6570\u636e\r\ndb.[tableName].insertOne({name: "\u5c0f\u660e"})\r\n# \u67e5\u8be2\u6570\u636e\r\ndb.[tableName].findOne()\r\n# \u67e5\u770b\u6240\u6709\u6570\u636e\u5e93\r\nshow dbs\r\n# \u67e5\u770b\u6240\u6709\u96c6\u5408\r\nshow collections\n'})}),"\n",(0,t.jsx)(e.h2,{id:"\u521b\u5efa\u7528\u6237",children:"\u521b\u5efa\u7528\u6237"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-sh",children:'db.createUser({user:"lmkscrm", pwd:"lmkscrm", roles:[{role:"dbOwner", db: "lmkscrm"}]})\r\ndb.createUser({user:"root", pwd:"root", roles:[{role:"root", db:"admin"}]})\n'})}),"\n",(0,t.jsx)(e.h2,{id:"\u805a\u5408\u67e5\u8be2",children:"\u805a\u5408\u67e5\u8be2"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"\u5206\u7ec4\u6c42\u548c"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-sh",children:"db.getCollection(\r\n\xa0 'lmk_store_contacts_task_stat_202404'\r\n).aggregate(\r\n\xa0 [\r\n\xa0 \xa0 {\r\n\xa0 \xa0 \xa0 $match: {\r\n\xa0 \xa0 \xa0 \xa0 shopid: 154,\r\n\xa0 \xa0 \xa0 \xa0 userid: { $in: ['HaoRenYiShengPingAn'] },\r\n\xa0 \xa0 \xa0 \xa0 date: { $lte: '2024-04-11' }\r\n\xa0 \xa0 \xa0 }\r\n\xa0 \xa0 },\r\n\xa0 \xa0 {\r\n\xa0 \xa0 \xa0 $group: {\r\n\xa0 \xa0 \xa0 \xa0 _id: '$userid',\r\n\xa0 \xa0 \xa0 \xa0 total: { $sum: '$num' }\r\n\xa0 \xa0 \xa0 }\r\n\xa0 \xa0 }\r\n\xa0 ],\r\n\xa0 { maxTimeMS: 60000, allowDiskUse: true }\r\n);\n"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"\u65f6\u95f4\u6233\u683c\u5f0f\u5316"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-sh",children:"db.getCollection(\r\n  'lmk_market_task_execute_time_20240506'\r\n).aggregate(\r\n  [\r\n    {\r\n      $match: {\r\n        subtask_id: '202405051641449192136'\r\n      }\r\n    },\r\n    {\r\n      $project: {\r\n        status: '$status',\r\n        ct: {\r\n          $dateToString: {\r\n            format: '%Y-%m-%d %H:%M:%S',\r\n            date: {\r\n              $toDate: {\r\n                $multiply: ['$created_at', 1000]\r\n              }\r\n            },\r\n            timezone: '+08:00'\r\n          }\r\n        }\r\n      }\r\n    }\r\n  ],\r\n  { maxTimeMS: 60000, allowDiskUse: true }\r\n);\n"})})]})}function u(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(i,{...n})}):i(n)}},8453:(n,e,r)=>{r.d(e,{R:()=>a,x:()=>d});var t=r(6540);const o={},s=t.createContext(o);function a(n){const e=t.useContext(s);return t.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:a(n.components),t.createElement(s.Provider,{value:e},n.children)}}}]);
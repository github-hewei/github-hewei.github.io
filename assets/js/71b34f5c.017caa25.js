"use strict";(self.webpackChunkhwdoc=self.webpackChunkhwdoc||[]).push([[7672],{368:(r,n,e)=>{e.r(n),e.d(n,{assets:()=>i,contentTitle:()=>t,default:()=>d,frontMatter:()=>c,metadata:()=>p,toc:()=>o});var s=e(4848),l=e(8453);const c={},t="Docker\u90e8\u7f72PHP\u5f00\u53d1\u73af\u5883",p={id:"\u540e\u7aef\u5f00\u53d1/Docker\u90e8\u7f72PHP\u5f00\u53d1\u73af\u5883",title:"Docker\u90e8\u7f72PHP\u5f00\u53d1\u73af\u5883",description:"\u5b89\u88c5\u6b65\u9aa4\u8bb0\u5f55",source:"@site/docs/\u540e\u7aef\u5f00\u53d1/Docker\u90e8\u7f72PHP\u5f00\u53d1\u73af\u5883.md",sourceDirName:"\u540e\u7aef\u5f00\u53d1",slug:"/\u540e\u7aef\u5f00\u53d1/Docker\u90e8\u7f72PHP\u5f00\u53d1\u73af\u5883",permalink:"/docs/\u540e\u7aef\u5f00\u53d1/Docker\u90e8\u7f72PHP\u5f00\u53d1\u73af\u5883",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/\u540e\u7aef\u5f00\u53d1/Docker\u90e8\u7f72PHP\u5f00\u53d1\u73af\u5883.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"\u7f51\u9875\u4e2d\u65e0\u6cd5\u8c03\u7528\u6444\u50cf\u5934",permalink:"/docs/\u524d\u7aef\u5f00\u53d1/\u7f51\u9875\u4e2d\u65e0\u6cd5\u8c03\u7528\u6444\u50cf\u5934"},next:{title:"EventSource",permalink:"/docs/\u540e\u7aef\u5f00\u53d1/EventSource"}},i={},o=[{value:"\u5b89\u88c5\u6b65\u9aa4\u8bb0\u5f55",id:"\u5b89\u88c5\u6b65\u9aa4\u8bb0\u5f55",level:2},{value:"\u62c9\u53d6\u955c\u50cf",id:"\u62c9\u53d6\u955c\u50cf",level:3},{value:"\u8fd0\u884c\u955c\u50cf\u5bb9\u5668",id:"\u8fd0\u884c\u955c\u50cf\u5bb9\u5668",level:3},{value:"\u5bb9\u5668\u64cd\u4f5c",id:"\u5bb9\u5668\u64cd\u4f5c",level:3},{value:"\u5b89\u88c5php\u6269\u5c55",id:"\u5b89\u88c5php\u6269\u5c55",level:3},{value:"Nginx\u914d\u7f6e\u6587\u4ef6",id:"nginx\u914d\u7f6e\u6587\u4ef6",level:3},{value:"\u5f00\u653e\u6307\u5b9a\u7aef\u53e3",id:"\u5f00\u653e\u6307\u5b9a\u7aef\u53e3",level:3},{value:"\u5b89\u88c5MongoDB",id:"\u5b89\u88c5mongodb",level:3},{value:"\u6700\u65b0\u521b\u5efa\u5bb9\u5668\u8bb0\u5f55",id:"\u6700\u65b0\u521b\u5efa\u5bb9\u5668\u8bb0\u5f55",level:3},{value:"\u6539\u9519\u6587\u4ef6\u5bb9\u5668\u65e0\u6cd5\u542f\u52a8",id:"\u6539\u9519\u6587\u4ef6\u5bb9\u5668\u65e0\u6cd5\u542f\u52a8",level:3},{value:"Docker\u65e0\u6cd5\u542f\u52a8",id:"docker\u65e0\u6cd5\u542f\u52a8",level:3},{value:"\u8bbe\u7f6e\u5bb9\u5668\u81ea\u52a8\u542f\u52a8",id:"\u8bbe\u7f6e\u5bb9\u5668\u81ea\u52a8\u542f\u52a8",level:3}];function a(r){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,l.R)(),...r.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"docker\u90e8\u7f72php\u5f00\u53d1\u73af\u5883",children:"Docker\u90e8\u7f72PHP\u5f00\u53d1\u73af\u5883"}),"\n",(0,s.jsx)(n.h2,{id:"\u5b89\u88c5\u6b65\u9aa4\u8bb0\u5f55",children:"\u5b89\u88c5\u6b65\u9aa4\u8bb0\u5f55"}),"\n",(0,s.jsx)(n.h3,{id:"\u62c9\u53d6\u955c\u50cf",children:"\u62c9\u53d6\u955c\u50cf"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"# \u67e5\u770b\u5f53\u524d\u955c\u50cf\r\ndocker images\r\n# \u5220\u9664\u955c\u50cf\r\ndocker rmi d1165f221234\r\n# \u62c9\u53d6\u9700\u8981\u7684\u955c\u50cf\r\ndocker pull php:7.2-fpm\r\ndocker pull mysql:5.7\r\ndocker pull nginx\r\ndocker pull redis\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u8fd0\u884c\u955c\u50cf\u5bb9\u5668",children:"\u8fd0\u884c\u955c\u50cf\u5bb9\u5668"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u521b\u5efa\u7f51\u7edc"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"# \u67e5\u770b\u7f51\u7edc\u76f8\u5173\u547d\u4ee4\r\ndocker network\r\n# \u67e5\u770b\u5f53\u524d\u6dfb\u52a0\u7684\u7f51\u7edc\r\ndocker network ls\r\n# \u67e5\u770b\u7f51\u7edc\u8be6\u7ec6\u4fe1\u606f\r\ndocker network inspect 20df25ce54d8\r\n# \u521b\u5efa\u4e00\u4e2a\u7f51\u7edc\r\ndocker network create php-network\r\n# \u5220\u9664\u4e00\u4e2a\u7f51\u7edc\r\ndocker network rm [NETWORK ID]\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u8fd0\u884cphp-fpm"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"docker run -d --name php7.2 --net=php-network --restart=always --privileged -p 9000:9000 -v d:/wwwroot:/var/www/html -v d:/docker/php7.2/php.ini:/usr/local/etc/php/php.ini:ro -v d:/docker/php7.2/fpm/www.conf:/usr/local/etc/php-fpm.d/www.conf:rw php:7.2-fpm\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u8fd0\u884cphp-fpm7.4"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"docker run -d --name php7.4 --net=php-network --restart=always --privileged -p 9001:9000 -v d:/wwwroot:/var/www/html -v d:/docker/php7.4/php.ini:/usr/local/etc/php/php.ini:ro -v d:/docker/php7.4/fpm/www.conf:/usr/local/etc/php-fpm.d/www.conf:rw php:7.4-fpm\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u8fd0\u884cNginx"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"docker run -d --name nginx --restart=always --privileged --network php-network --link php7.2:php7.2 -p 80:80 -v d:/docker/nginx/conf.d:/etc/nginx/conf.d -v d:/wwwroot:/usr/share/nginx/html -v d:/wwwlogs:/var/log/nginx nginx\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u8fd0\u884cRedis"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"docker run -itd --network php-network --restart=always --network-alias redis --name redis -p 16379:6379 redis\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u8fd0\u884cmysql"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"# \u67e5\u770b\u6570\u636e\u5377\r\ndocker volume ls\r\n\r\n# \u521b\u5efa\u6570\u636e\u5377\r\ndocker volume create --name mysql-volume\r\n\r\n# \u8fd0\u884cMysql\r\ndocker run -d -p 13301:3306 --net=php-network -v mysql-volume:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=root --name mysql mysql:5.7\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u5bb9\u5668\u64cd\u4f5c",children:"\u5bb9\u5668\u64cd\u4f5c"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"# \u67e5\u770b\u5bb9\u5668\u5217\u8868\r\ndocker ps -a\r\n\r\n# \u542f\u52a8/\u505c\u6b62/\u91cd\u542f\u5bb9\u5668\r\ndocker [start|stop|restart] [CONTAINER ID]\r\n\r\n# \u5220\u9664\u5bb9\u5668\r\ndocker rm [CONTAINER ID]\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u5b89\u88c5php\u6269\u5c55",children:"\u5b89\u88c5php\u6269\u5c55"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u6784\u5efa\u5e26\u6269\u5c55\u7684\u955c\u50cf Dockerfile"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"######\r\n# See: https://hub.docker.com/_/php/\r\n######\r\n\r\nFROM php:7.2-fpm\r\nRUN apt-get update && apt-get install -y \\\r\n        libfreetype6-dev \\\r\n        libjpeg62-turbo-dev \\\r\n        libpng-dev \\\r\n    && docker-php-ext-install -j$(nproc) iconv \\\r\n    && docker-php-ext-configure gd --with-freetype-dir=/usr/include/ --with-jpeg-dir=/usr/include/ \\\r\n    && docker-php-ext-install -j$(nproc) gd \\\r\n    && pecl install redis \\\r\n    && docker-php-ext-enable redis \\\r\n    && docker-php-ext-install exif \\\r\n    && docker-php-ext-enable exif \\\r\n    && docker-php-ext-install pcntl \\\r\n    && docker-php-ext-enable pcntl \\\r\n    && docker-php-ext-install pdo_mysql \\\r\n    && docker-php-ext-enable pdo_mysql\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u6784\u5efa\u65b0\u7684\u955c\u50cf"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"# \u5728Dockerfile \u6240\u5728\u7684\u76ee\u5f55\r\ndocker build -f Dockerfile -t php7.2-ext:0.1 .\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u5355\u72ec\u5b89\u88c5\u6269\u5c55\u7684\u6559\u7a0b"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"#\u8fdb\u5165\u5bb9\u5668\r\ndocker exec -it php7.2 /bin/bash\r\ncd /user/local/bin/\r\n\r\n# \u67e5\u770b\u80fd\u5b89\u88c5\u7684\u6269\u5c55\uff0c\u5982\u679c\u6ca1\u6709\u7684\u8bdd\u53ef\u4ee5\u5148\u8fd0\u884c\u4e0b\u9762\u7684\u547d\u4ee4\r\nls -l /usr/src/php/ext\r\ndocker-php-source extract\r\n\r\n# \u5b89\u88c5pdo_mysql \u6269\u5c55\r\ndocker-php-ext-install pdo_mysql\r\n\r\n# \u5b89\u88c5mysqli\u6269\u5c55\r\ndocker-php-ext-install mysqli\r\n\r\n# \u5b89\u88c5 zip \u6269\u5c55\r\napt update\r\napt install libzip-dev\r\ndocker-php-ext-install zip\r\n\r\n# \u5b89\u88c5mbstring\u6269\u5c55\r\ndocker-php-ext-install mbstring\r\n\r\n# \u5b89\u88c5 reids \u6269\u5c55\r\npecl install redis\n"})}),"\n",(0,s.jsx)(n.h3,{id:"nginx\u914d\u7f6e\u6587\u4ef6",children:"Nginx\u914d\u7f6e\u6587\u4ef6"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u914d\u7f6e\u6587\u4ef6\u5185\u5bb9"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:'user  nginx;\r\nworker_processes  1;\r\n\r\nerror_log  /var/log/nginx/error.log warn;\r\npid        /var/run/nginx.pid;\r\n\r\n\r\nevents {\r\n    worker_connections  1024;\r\n}\r\n\r\n\r\nhttp {\r\n    fastcgi_intercept_errors on;\r\n    \r\n    include       /etc/nginx/mime.types;\r\n    default_type  application/octet-stream;\r\n\r\n    log_format  main  \'$remote_addr - $remote_user [$time_local] "$request" \'\r\n                      \'$status $body_bytes_sent "$http_referer" \'\r\n                      \'"$http_user_agent" "$http_x_forwarded_for"\';\r\n\r\n    access_log  /var/log/nginx/access.log  main;\r\n\r\n    sendfile        on;\r\n    #tcp_nopush     on;\r\n\r\n    keepalive_timeout  65;\r\n\r\n    #gzip  on;\r\n\r\n#    upstream php_server{\r\n#        server php7.2:9000 weight=50;\r\n#        server php7.2:9000 down;\r\n#        server php7.2_1:9002 backup; # \u5907\u7528\u670d\u52a1\u5668\uff0c\u5f53\u51fa\u73b0\u5176\u4ed6\u670d\u52a1\u5668\u7e41\u5fd9\u6216\u5b95\u673a\u65f6\uff0c\u624d\u4f1a\u8bf7\u6c42\u8be5\u670d\u52a1\u5668\u8fdb\u884c\u5de5\u4f5c\u3002\r\n#        #server 192.168.6.63 weight=100 fail_timeout=30s max_fails=2; # max_fails \u8bf7\u6c42\u5931\u8d25\u7684\u6b21\u6570\uff0c\u5f53\u8fbe\u5230\u8be5\u503c\u65f6\uff0c\u8ba4\u4e3a\u8be5\u670d\u52a1\u5668\u4e0d\u7528\u4f7f\u7528\u3002\r\n#        ip_hash;  #\u4f7f\u7528hash\u7b97\u6cd5\u4e3a\u6bcf\u4e2a\u5ba2\u6237\u7aef\u8ba1\u7b97\u4e00\u4e2a\u5bf9\u5e94\u5904\u7406\u7684\u670d\u52a1\u5668\uff0c\u80fd\u4fdd\u6301\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u7aef\u7684 session \u4f1a\u8bdd\uff08\u8be5session\u4e00\u822c\u4fdd\u5b58\u5728\u670d\u52a1\u5668\u4e0a\uff0c.net\u4e2d\u8be5session\u53ef\u4ee5\u653e\u5165\u4e00\u4e9b\u7528\u6237\u7684\u4fe1\u606f\u7b49\uff09\u3002\r\n#    }\r\n\r\n    include /etc/nginx/conf.d/*.conf;\r\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Yii\u6846\u67b6\u9879\u76ee\u914d\u7f6e\u6587\u4ef6"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"server{\r\n        listen 80;\r\n        server_name www.lmkwxwork.com;\r\n        root  /usr/share/nginx/html/lmk/wechat_work/web;\r\n        index index.php index.html index.htm;\r\n        autoindex on;\r\n\r\n        if (!-e $request_filename) {\r\n           rewrite ^/index.php(.*)$ /index.php?s=$1 last;\r\n           rewrite ^(.*)$ /index.php?s=$1 last;\r\n           break;\r\n       }\r\n\r\n       error_page 500 502 503 504  = /500.html;\r\n\r\n       #location ~ [^/]\\.php(/|$){\r\n       #     # comment try_files $uri =404; to enable pathinfo\r\n       #     try_files $uri =404;\r\n       #     fastcgi_pass 127.0.0.1:9000;\r\n       #     fastcgi_index index.php;\r\n       #     include fastcgi_params;\r\n       #     #include pathinfo.conf;\r\n       # }\r\n\r\n        location ~ \\.php$ {\r\n        #location ~ [^/]\\.php(/|$){\r\n            root           /var/www/html/lmk/wechat_work/web;\r\n            fastcgi_pass   php7.2:9000;\r\n            fastcgi_index  index.php;\r\n            fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;\r\n            include        fastcgi_params;\r\n        }\r\n\r\n        location ~ .*\\.(gif|jpg|jpeg|png|bmp|swf)$\r\n        {\r\n            expires      30d;\r\n        }\r\n\r\n        location ~ .*\\.(js|css)?$\r\n        {\r\n            expires      12h;\r\n        }\r\n\r\n        access_log  /var/log/nginx/www.lmkwxwork.com.access.log  main;\r\n        error_log  /var/log/nginx/www.lmkwxwork.com.error.log  warn;\r\n    }\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"TP5\u7a0b\u5e8f\u914d\u7f6e\u6587\u4ef6"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:'server {\r\n    listen 80;\r\n    server_name z012.website.com;\r\n    root /usr/share/nginx/html/z012.website.com/public; #\u9759\u6001\u8d44\u6e90\u8bbf\u95ee\u8fd9\u4e2a\u8def\u5f84\r\n    index index.php index.html;\r\n    #autoindex on;\r\n\r\n    location / {\r\n        if (!-e $request_filename){\r\n            rewrite  ^(.*)$  /index.php?s=$1  last;   break;\r\n        }\r\n    }\r\n\r\n\r\n    location ~ [^/]\\.php(/|$)\r\n    {\r\n        root /var/www/html/z012.website.com/public; # PHP\u811a\u672c\u8bbf\u95ee\u8fd9\u4e2a\u8def\u5f84\r\n\r\n\r\n\r\n        #try_files $uri =404;\r\n\r\n\r\n        fastcgi_pass  php7.2:9000;\r\n        fastcgi_index index.php;\r\n\r\n        set $real_script_name $fastcgi_script_name;\r\n        if ($fastcgi_script_name ~ "^(.+?\\.php)(/.+)$") {\r\n                set $real_script_name $1;\r\n                set $path_info $2;\r\n         }\r\n        fastcgi_param SCRIPT_FILENAME $document_root$real_script_name;\r\n        fastcgi_param SCRIPT_NAME $real_script_name;\r\n        fastcgi_param PATH_INFO $path_info;\r\n\r\n\r\n        #fastcgi_param SCRIPT_FILENAME $document_root$real_script_name;\r\n        include fastcgi_params;\r\n    }\r\n\r\n\r\n    location ~ .*\\.(gif|jpg|jpeg|png|bmp|swf)$ {\r\n        expires 30d;\r\n        error_log off;\r\n        access_log /dev/null;\r\n    }\r\n\r\n    location ~ .*\\.(js|css)$ {\r\n        expires 12h;\r\n        error_log off;\r\n        access_log /dev/null;\r\n    }\r\n\r\n    access_log /var/log/nginx/z012.website.com.access.log main;\r\n    error_log  /var/log/nginx/z012.website.com.error.log warn;\r\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u5f00\u653e\u6307\u5b9a\u7aef\u53e3",children:"\u5f00\u653e\u6307\u5b9a\u7aef\u53e3"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"# \u67e5\u770b\u67d0\u5bb9\u5668\u7684ip\r\ndocker inspect php7.2\r\n# \u5f00\u653e\u7aef\u53e3\r\n# \u5b89\u88c5 iptables\r\napt-get install iptables\r\n\r\n#/sbin/iptables -I INPUT -p tcp --dport 23 -j ACCEPT\r\n#/etc/rc.d/init.d/iptables save\r\n#/etc/init.d/iptables restart\r\n#/etc/init.d/iptables status\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u5b89\u88c5mongodb",children:"\u5b89\u88c5MongoDB"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"# \u62c9\u53d6\u955c\u50cf\r\ndocker pull mongo:4.4\r\n\r\n# \u8fd0\u884c\u5bb9\u5668\r\ndocker run -itd --name mongo --restart=always -p 27017:27017 mongo:4.4 --auth\r\n\r\n# \u8fdb\u5165\u6570\u636e\u5e93\r\ndocker exec -it mongo mongo admin\r\n\r\n# \u521b\u5efa\u8d26\u53f7\r\ndb.createUser({ user:'admin',pwd:'123456',roles:[ { role:'userAdminAnyDatabase', db: 'admin'},\"readWriteAnyDatabase\"]});\r\n\r\ndb.createUser({user:'lmkscrm', pwd:'lmkscrm', roles:[{role:'dbOwner', db:'lmkscrm'}]})\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u6700\u65b0\u521b\u5efa\u5bb9\u5668\u8bb0\u5f55",children:"\u6700\u65b0\u521b\u5efa\u5bb9\u5668\u8bb0\u5f55"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"# \u6784\u5efa\u81ea\u5df1\u7684\u955c\u50cf\r\ndocker build -f Dockerfile -t php7.2-ext:0.1 .\r\n\r\n# \u8fd0\u884credis\u5bb9\u5668\r\ndocker run -itd --net=custom-network --restart=always --network-alias redis --name redis -p 16379:6379 redis\r\n\r\n# \u8fd0\u884cphp7.2\u5bb9\u5668\r\ndocker run -d --name php7.2 --net=custom-network --restart=always --privileged -p 9000:9000 -v d:/www/wwwroot:/var/www/html -v d:/www/docker/php7.2/php.ini:/usr/local/etc/php/php.ini:ro -v d:/www/docker/php7.2/fpm/www.conf:/usr/local/etc/php-fpm.d/www.conf:rw php7.2-ext:0.1\r\n\r\n# \u8fd0\u884cnginx\u5bb9\u5668\r\ndocker run -d --name nginx --restart=always --privileged --net=custom-network --link php7.2:php7.2 -p 80:80 -p 8080:8080 -v d:/www/docker/nginx/conf.d:/etc/nginx/conf.d -v d:/www/wwwroot:/usr/share/nginx/html -v d:/www/wwwlogs:/var/log/nginx nginx\r\n\r\n# \u8fd0\u884cmysql\u5bb9\u5668\r\ndocker run -d -p 13301:3306 --restart=always --net=custom-network -v mysql-volume:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=root --name mysql mysql:5.7\r\n\r\n# \u8fd0\u884cmongo\u5bb9\u5668\r\ndocker run -itd --name mongo --restart=always --net=custom-network -p 27017:27017 mongo:4.4 --auth\r\n\r\n# php\u5b89\u88c5mongodb\u6269\u5c55\r\napt-get install -y libcurl4-openssl-dev pkg-config libssl-dev\r\npecl install mongodb\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u81ea\u5b9a\u4e49php\u955c\u50cf\u914d\u7f6e\u6587\u4ef6"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"######\r\n# See: https://hub.docker.com/_/php/\r\n######\r\n\r\nFROM php:7.4-fpm\r\nRUN apt-get update && apt-get install -y \\\r\n        libfreetype6-dev \\\r\n        libjpeg62-turbo-dev \\\r\n        libpng-dev \\\r\n    && docker-php-ext-install -j$(nproc) iconv \\\r\n    && docker-php-ext-configure gd --with-jpeg=/usr/include --with-freetype=/usr/include/freetype2/ \\\r\n    && docker-php-ext-install -j$(nproc) gd \\\r\n    && pecl install redis \\\r\n    && docker-php-ext-enable redis \\\r\n    && docker-php-ext-install bcmath \\\r\n    && docker-php-ext-enable bcmath \\\r\n    && docker-php-ext-install exif \\\r\n    && docker-php-ext-enable exif \\\r\n    && docker-php-ext-install pcntl \\\r\n    && docker-php-ext-enable pcntl \\\r\n    && docker-php-ext-install pdo_mysql \\\r\n    && docker-php-ext-enable pdo_mysql\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"# \u8fd0\u884cphp\u5bb9\u5668\r\ndocker run -d --name php7.4 --net=custom-network --restart=always --privileged -p 9001:9000 -v d:/www/wwwroot:/var/www/html -v d:/www/docker/php7.4/php.ini:/usr/local/etc/php/php.ini:ro -v d:/www/docker/php7.4/fpm/www.conf:/usr/local/etc/php-fpm.d/www.conf:rw php7.4-ext:0.1\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u6539\u9519\u6587\u4ef6\u5bb9\u5668\u65e0\u6cd5\u542f\u52a8",children:"\u6539\u9519\u6587\u4ef6\u5bb9\u5668\u65e0\u6cd5\u542f\u52a8"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u95ee\u9898\u539f\u56e0\uff1a"})}),"\n",(0,s.jsx)(n.p,{children:"\u767b\u5f55\u5230mysql\u5bb9\u5668\u7684bash\u4e2d\uff0c\u4f7f\u7528vi\u7f16\u8f91\u5668\u4fee\u6539mysql\u7684\u914d\u7f6e\u3002\r\n\u7531\u4e8e\u914d\u7f6e\u6587\u4ef6\u4fee\u6539\u9519\u8bef\u5bfc\u81f4mysql\u5bb9\u5668\u65e0\u6cd5\u542f\u52a8\u3002\r\nmysql\u5bb9\u5668\u65e0\u6cd5\u542f\u52a8\uff0c\u6240\u4ee5\u6ca1\u529e\u6cd5\u4fee\u590d\u914d\u7f6e\u6587\u4ef6\u3002"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u89e3\u51b3\u529e\u6cd5\uff1a"})}),"\n",(0,s.jsx)(n.p,{children:"\u5c06\u914d\u7f6e\u6587\u4ef6\u62f7\u8d1d\u5230\u4e3b\u673a\uff0c\u4fee\u6539\u540e\u518d\u62f7\u8d1d\u56de\u5bb9\u5668"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"# \u62f7\u8d1d\u6587\u4ef6\u51fa\u5bb9\u5668\r\ndocker cp /etc/my.cnf .\r\n\r\n# \u62f7\u8d1d\u6587\u4ef6\u8fdb\u5bb9\u5668\r\ndocker cp my.cnf /etc/my.cnf\n"})}),"\n",(0,s.jsx)(n.h3,{id:"docker\u65e0\u6cd5\u542f\u52a8",children:"Docker\u65e0\u6cd5\u542f\u52a8"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"# \u8fd0\u884c\u547d\u4ee4\uff0c\u4e4b\u524dDocker\u6240\u6709\u7684\u955c\u50cf\u548c\u5bb9\u5668\u90fd\u4f1a\u6e05\u7a7a\r\nNoLsp.exe C:\\Windows\\System32\\wsl.exe\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u8bbe\u7f6e\u5bb9\u5668\u81ea\u52a8\u542f\u52a8",children:"\u8bbe\u7f6e\u5bb9\u5668\u81ea\u52a8\u542f\u52a8"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"# \u542f\u52a8\u65f6\u52a0 --restart=always\r\n\r\n# \u5982\u679c\u5df2\u7ecf\u542f\u52a8\u7684\u9879\u76ee\uff0c\u5219\u4f7f\u7528update\u66f4\u65b0\r\ndocker update --restart=always mysql\r\ndocker update --restart=always redis\n"})})]})}function d(r={}){const{wrapper:n}={...(0,l.R)(),...r.components};return n?(0,s.jsx)(n,{...r,children:(0,s.jsx)(a,{...r})}):a(r)}},8453:(r,n,e)=>{e.d(n,{R:()=>t,x:()=>p});var s=e(6540);const l={},c=s.createContext(l);function t(r){const n=s.useContext(c);return s.useMemo((function(){return"function"==typeof r?r(n):{...n,...r}}),[n,r])}function p(r){let n;return n=r.disableParentContext?"function"==typeof r.components?r.components(l):r.components||l:t(r.components),s.createElement(c.Provider,{value:n},r.children)}}}]);
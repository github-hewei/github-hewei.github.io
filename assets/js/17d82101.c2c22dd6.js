"use strict";(self.webpackChunkhwdoc=self.webpackChunkhwdoc||[]).push([[3741],{7:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>i,metadata:()=>o,toc:()=>a});var s=r(4848),l=r(8453);const i={},t="MySQL\u4e3b\u4ece\u540c\u6b65",o={id:"MySQL/MySQL\u4e3b\u4ece\u540c\u6b65",title:"MySQL\u4e3b\u4ece\u540c\u6b65",description:"\u7b80\u4ecb",source:"@site/docs/MySQL/MySQL\u4e3b\u4ece\u540c\u6b65.md",sourceDirName:"MySQL",slug:"/MySQL/MySQL\u4e3b\u4ece\u540c\u6b65",permalink:"/docs/MySQL/MySQL\u4e3b\u4ece\u540c\u6b65",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/MySQL/MySQL\u4e3b\u4ece\u540c\u6b65.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"MongoDB\u6742\u9879\u8bb0\u5f55",permalink:"/docs/MongoDB/MongoDB\u6742\u9879\u8bb0\u5f55"},next:{title:"MySQL\u521b\u5efa\u6570\u636e\u5e93\u8d26\u53f7",permalink:"/docs/MySQL/MySQL\u521b\u5efa\u8d26\u53f7"}},c={},a=[{value:"\u7b80\u4ecb",id:"\u7b80\u4ecb",level:2},{value:"\u5f02\u6b65\u590d\u5236\u65b9\u6848",id:"\u5f02\u6b65\u590d\u5236\u65b9\u6848",level:2},{value:"\u5f00\u542fbinlog\uff0c\u8bbe\u7f6eserver-id",id:"\u5f00\u542fbinlog\u8bbe\u7f6eserver-id",level:3},{value:"\u4e3b\u670d\u52a1\u5668\u8bbe\u7f6e\u8d26\u53f7",id:"\u4e3b\u670d\u52a1\u5668\u8bbe\u7f6e\u8d26\u53f7",level:3},{value:"\u542f\u52a8\u4ece\u670d\u52a1\u5668\u590d\u5236\u529f\u80fd",id:"\u542f\u52a8\u4ece\u670d\u52a1\u5668\u590d\u5236\u529f\u80fd",level:3},{value:"\u5c06\u4e3b\u670d\u52a1\u5668\u76843306\u7aef\u53e3\u5f00\u653e",id:"\u5c06\u4e3b\u670d\u52a1\u5668\u76843306\u7aef\u53e3\u5f00\u653e",level:3},{value:"\u5907\u6ce8\u5185\u5bb9",id:"\u5907\u6ce8\u5185\u5bb9",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"mysql\u4e3b\u4ece\u540c\u6b65",children:"MySQL\u4e3b\u4ece\u540c\u6b65"}),"\n",(0,s.jsx)(n.h2,{id:"\u7b80\u4ecb",children:"\u7b80\u4ecb"}),"\n",(0,s.jsx)(n.p,{children:"\u5c06\u5355\u673a\u90e8\u7f72\u7684mysql\u4fee\u6539\u6210\u591a\u4e2amysql\u670d\u52a1\u5668\u4e3b\u4ece\u540c\u6b65\uff0c\u6709\u591a\u4e2a\u4f18\u70b9\uff1a"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"\u6709\u6570\u636e\u5907\u4efd\u7684\u6548\u679c\uff1a\u5982\u679c\u4e00\u4e2a\u673a\u5668\u6570\u636e\u635f\u574f\u4e22\u5931\uff0c\u5176\u4ed6\u673a\u5668\u4e0a\u8fd8\u6709\u5907\u4efd"}),"\n",(0,s.jsx)(n.li,{children:"\u7f13\u89e3\u670d\u52a1\u5668\u538b\u529b\uff1a\u53ef\u4ee5\u5b9e\u73b0\u8bfb\u5199\u5206\u79bb\uff0c\u4e3b\u5e93\u5199\u5165\u6570\u636e\uff0c\u4ece\u5e93\u8bfb\u53d6\u6570\u636e\uff0c\u538b\u529b\u5206\u644a\u5230\u591a\u4e2a\u670d\u52a1\u5668\u4e0a"}),"\n",(0,s.jsx)(n.li,{children:"\u72ec\u7acb\u6570\u636e\u73af\u5883\uff1a\u4ece\u5e93\u7684\u6570\u636e\u53ef\u4ee5\u7528\u6765\u5e94\u7528\u5230\u6d4b\u8bd5\u548c\u6570\u636e\u7edf\u8ba1\u7684\u573a\u666f\u4e2d\uff0c\u4e0d\u5f71\u54cd\u4e1a\u52a1"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"\u5f02\u6b65\u590d\u5236\u65b9\u6848",children:"\u5f02\u6b65\u590d\u5236\u65b9\u6848"}),"\n",(0,s.jsx)(n.h3,{id:"\u5f00\u542fbinlog\u8bbe\u7f6eserver-id",children:"\u5f00\u542fbinlog\uff0c\u8bbe\u7f6eserver-id"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"-- \u67e5\u770b\u662f\u5426\u5f00\u542fbin_log\r\nSHOW VARIABLES LIKE 'log_bin';\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"# \u7f16\u8f91\u914d\u7f6e\u6587\u4ef6\r\nvim /usr/local/mysql/my.cnf\r\n\r\n# \u4fee\u6539\u4e0b\u9762\u914d\u7f6e\r\n\r\n# \u5f00\u542fbinlog\r\nbin_log\r\n\r\n# \u8bbe\u7f6eserver-id (\u4e3b\u4ece\u670d\u52a1\u5668\u90fd\u9700\u8981\u8bbe\u7f6e\uff0cid\u4e0d\u80fd\u76f8\u540c)\r\nserver-id = 10\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u4e3b\u670d\u52a1\u5668\u8bbe\u7f6e\u8d26\u53f7",children:"\u4e3b\u670d\u52a1\u5668\u8bbe\u7f6e\u8d26\u53f7"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"# \u521b\u5efa\u4e00\u4e2a\u6709\u81ea\u52a8\u590d\u5236\u529f\u80fd\u7684\u8d26\u53f7\uff08\u4e3b\u4ece\u590d\u5236\uff09\r\n# \u5141\u8bb8\u590d\u5236*.*\u5168\u90e8\u6570\u636e/\u5168\u90e8\u8868\uff0c\u8d26\u53f7\u540d\u5b57 slave\r\n# \u5141\u8bb8\u5176\u5728\u4efb\u4f55\u4e3b\u673a%\u590d\u5236\uff0c\u590d\u5236\u7684\u65f6\u5019\u9700\u8981\u4f7f\u7528\u5bc6\u7801 123456\r\ngrant replication slave on *.* to 'slave'@'%' identified by '123456';\r\n\r\n# \u5237\u65b0\u6743\u9650\r\nflush privileges;\r\n\r\n# \u67e5\u770b\u4e3b\u670d\u52a1\u5668\u72b6\u6001\r\nshow master status;\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"mysql> show master status;\r\n+----------------------+----------+--------------+------------------+-------------------+\r\n| File | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |\r\n+----------------------+----------+--------------+------------------+-------------------+\r\n| localhost-bin.000002 | 398 | | | |\r\n+----------------------+----------+--------------+------------------+-------------------+\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u542f\u52a8\u4ece\u670d\u52a1\u5668\u590d\u5236\u529f\u80fd",children:"\u542f\u52a8\u4ece\u670d\u52a1\u5668\u590d\u5236\u529f\u80fd"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"# \u7ed9\u4ece\u670d\u52a1\u5668\u8bbe\u7f6e\u4e3b\u4ece\u8054\u7cfb\r\nchange master to master_host='192.168.137.10', master_user='slave', master_password='123456', master_log_file='localhost-bin.000002', master_log_pos=398;\r\n\r\n# \u542f\u52a8\u4ece\u670d\u52a1\u5668\u7684\u590d\u5236\u529f\u80fd\r\nstart slave;\r\n\r\n# \u5173\u95ed\u590d\u5236\u529f\u80fd\r\nstop slave;\r\n\r\n# \u9a8c\u8bc1\u4ece\u670d\u52a1\u5668\u662f\u5426\u6210\u529f\r\nshow slave status;\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u5c06\u4e3b\u670d\u52a1\u5668\u76843306\u7aef\u53e3\u5f00\u653e",children:"\u5c06\u4e3b\u670d\u52a1\u5668\u76843306\u7aef\u53e3\u5f00\u653e"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"# \u5f00\u653e3306\u7aef\u53e3\r\nfirewall-cmd --zone=public --add-port=3306/tcp --permanent\r\n# \u5173\u95ed3306\u7aef\u53e3\r\nfirewall-cmd --zone=public --remove-port=3306/tcp --permanent\r\n# \u4f7f\u914d\u7f6e\u7acb\u5373\u751f\u6548\r\nfirewall-cmd --reload\r\n# \u67e5\u770b\u9632\u706b\u5899\u5f00\u542f\u7684\u6240\u6709\u7aef\u53e3\r\nfirewall-cmd --zone=public --list-ports\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u5907\u6ce8\u5185\u5bb9",children:"\u5907\u6ce8\u5185\u5bb9"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Slave_IO_Running: Yes # \u8fde\u63a5\u4e3b\u670d\u52a1\u5668\u6210\u529f\r\nSlave_SQL_Running: Yes\n"})})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>t,x:()=>o});var s=r(6540);const l={},i=s.createContext(l);function t(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:t(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);